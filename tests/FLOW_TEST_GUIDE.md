# 流程图生成压力测试指南

## 快速开始

### 1. 确保服务器运行
```bash
npm run dev
```

### 2. 运行快速测试（5个测试用例）
```bash
npx ts-node tests/quick-flow-test.ts
```

### 3. 运行完整压力测试（12个测试用例）
```bash
npm run test:flow
```

## 测试用例说明

### 包含的测试场景：
1. **基础功能测试** - 简单的系统架构
2. **多语言测试** - 中文、英文、日文
3. **复杂系统测试** - 10+ 节点的大型系统
4. **特殊字符测试** - 包含代码、SQL、正则表达式
5. **超长内容测试** - 1000+ 字符的需求描述
6. **URL处理测试** - 包含长URL和特殊格式

### 压力测试指标：
- **成功率** - JSON 解析和生成的成功率
- **响应时间** - API 响应速度
- **节点准确性** - 生成的节点数量是否合理
- **错误恢复** - JSONFixer 的使用情况

## 测试结果解读

### 性能分级：
- **优秀** (<5秒) - 正常表现
- **良好** (5-10秒) - 可接受
- **较慢** (10-20秒) - 需要优化
- **很慢** (>20秒) - 存在问题

### 常见问题：
1. **403 错误** - API Key 配置问题
2. **超时错误** - 网络或 AI 响应慢
3. **JSON 解析错误** - JSONFixer 未能修复的格式问题

## 测试结果位置
所有详细测试结果保存在 `tests/results/` 目录

## JSONFixer 验证

通过查看服务器日志，可以看到：
- `fixJSONControlCharacters called` - 基础修复被调用
- `Standard JSON parse failed, trying advanced fixer` - 高级修复被调用
- `JSON Fixer applied fixes: [...]` - 具体修复了什么问题